<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <title>終極密碼</title>
    <style>
        .result{
            width: 50%;
            padding: 50px 20px;
            box-sizing: border-box;
            margin: 50px 0;
        }
        .result > button:nth-child(1){
            background-color: purple;
        }
        .range, .box{
            vertical-align: middle;
            height: 30px;
            line-height: 30px;
            border: 1px solid rgba(0, 0, 0, 0.653);
            border-radius: 5px;
        }
        .number-button{
            border: 1px solid #aaa;
        }
        .number-button button{
            margin: 2px;
            width: calc(33.333333% - 4px);
        }
    </style>
</head>
<body>
    <div class="result m-auto">
        <button type="button" class="btn w-100 btn-primary text-white w-100 mb-2">重玩</button>
        <div class="range m-auto mb-2 w-100 text-center">0 ~ 100</div>
        <button type="button" class="btn btn-primary text-white mb-2 d-block w-100">產生數字</button>
        <div class="box m-auto mb-2 w-100 text-end"></div>
        <div class="number-button d-flex flex-wrap w-100 justify-content-center row-cols-3 m-auto">
            <button class="btn-dark text-white col">1</button>
            <button class="btn-dark text-white col">2</button>
            <button class="btn-dark text-white col">3</button>
            <button class="btn-dark text-white col">4</button>
            <button class="btn-dark text-white col">5</button>
            <button class="btn-dark text-white col">6</button>
            <button class="btn-dark text-white col">7</button>
            <button class="btn-dark text-white col">8</button>
            <button class="btn-dark text-white col">9</button>
            <button class="btn-dark text-danger col">X</button>
            <button class="btn-dark text-white col">0</button>
            <button class="btn-dark text-success col">V</button>
        </div>
    </div>

    <script>
        let create = document.querySelector(".result > button:nth-of-type(2)");
        let reset = document.querySelector(".result > button:nth-of-type(1)");
        let input = document.querySelector(".box");
        let button = document.querySelectorAll(".number-button > button");
        let range = document.querySelector(".range");
        let answer;
        let toplimit = 100;
        let downlimit = 0;


        create.addEventListener("click", function(event){
            answer = Math.round((Math.random() * 99));
        });
        reset.addEventListener("click", function(event){
            range.innerText = "0 ~ 100";
            input.innerText = "";
        });
        button.forEach((item, index) => {
            if (item.innerText === "V"){
                item.addEventListener("click", function(event){
                    if (input.innerText > 100 || input.innerText < 0){
                        range.innerText = "重新輸入";
                    }
                    else if (range.innerText === "0 ~ 100" && input.innerText > answer){
                        toplimit = input.innerText;
                        range.innerText = `${0} ~ ${toplimit}`;
                        input.innerText = "";
                    }
                    else if (range.innerText === "0 ~ 100" && input.innerText < answer){
                        downlimit = input.innerText;
                        range.innerText = `${downlimit} ~ ${100}`;
                        input.innerText = "";
                    }
                    else if (input.innerText > answer && toplimit > input.innerText){
                        toplimit = input.innerText;
                        range.innerText = `${downlimit} ~ ${toplimit}`;
                        input.innerText="";
                    }
                    else if ((input.innerText > answer || input.innerText < answer) && (toplimit < input.innerText || downlimit > input.innerText)){
                        range.innerText = `重新輸入範圍為${downlimit} ~ ${toplimit}`;
                    }
                    else if (input.innerText < answer && input.innerText > downlimit){
                        downlimit = input.innerText;
                        range.innerText = `${downlimit} ~ ${toplimit}`;
                        input.innerText="";
                    }
                    else{
                        range.innerText = "恭喜猜中";
                    }
                });
            }
            else if (item.innerText === "X"){
                item.addEventListener("click", function(event){
                    input.innerText = "";
                });
            }
            else {
                item.addEventListener("click", function(event){
                    input.innerText += item.innerText;
                });
            }
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</body>
</html>
